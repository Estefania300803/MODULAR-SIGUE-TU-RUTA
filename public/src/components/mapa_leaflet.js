// Declarar la variable global
let polyline;
let map;
document.addEventListener("DOMContentLoaded", function () {
  const rutaC02 = [
    [20.84197667, -102.79272667],
    [20.82569790, -102.79237667],
    [20.82549333, -102.79176333],
    [20.82156000, -102.77916167],
    [20.82144833, -102.77847167], 
    [20.821330, -102.778083], //EMPIEZA LA GLORIETA
    [20.821225, -102.77805667],
    [20.82117167, -102.77803667],
    [20.82111833, -102.77801167], //Necesarias
    [20.82106667, -102.777975],
    [20.82102, -102.77792],
    [20.82097667, -102.77786167],
    [20.82094, -102.77779667],
    [20.820915, -102.777735],
    [20.8209, -102.77766667],
    [20.82089667, -102.77760167],
    [20.82090667, -102.77753833],
    [20.82092667, -102.77747833],
    [20.82095167, -102.77742333],
    [20.82098000, -102.77737333],
    [20.82101500, -102.77733000],
    [20.82105333, -102.77729167],
    [20.82109000, -102.77726167],
    [20.82112167, -102.77723333],
    [20.82114500, -102.77720333],
    [20.821145, -102.777117], //FIN DE LA GLORIETA
    [20.820844, -102.775581], 
    [20.81977000, -102.76943000],
    [20.81963167, -102.76909000],
    [20.81960600, -102.76900],
    [20.81961667, -102.76859500],
    [20.819735, -102.76734833],
    [20.819695, -102.767249],
    [20.816508, -102.766374],
    [20.81640667, -102.76610167],
    [20.81624667, -102.76571167],
    [20.816002, -102.765388],
    [20.816009, -102.764672],
    [20.810609, -102.764707],
    [20.808054, -102.764766],
    [20.807958, -102.763790],
    [20.801334, -102.763640],
    [20.801302, -102.764400],
    [20.801274, -102.764469],
    [20.801243, -102.764476],
    [20.801223, -102.764469],
    [20.801223, -102.763640],
    [20.800552, -102.763080],
    [20.804140, -102.758698],
    [20.810186, -102.758524],
    [20.810097, -102.759765],
    [20.812185, -102.759765],
    [20.817433, -102.759700],
    [20.823700, -102.760520],
    [20.823380, -102.762580],
    [20.823043, -102.762520],
    [20.822892, -102.766538],
    [20.820990, -102.766538],
    [20.820760, -102.768939],
    [20.820466, -102.771528],
    [20.820369, -102.772259],
    [20.820335, -102.772336],
    [20.820335, -102.772402],
    [20.820487, -102.773254],
    [20.82053500, -102.77355833],
    [20.82054667, -102.77362667],
    [20.821180, -102.777120],
    [20.82123000, -102.77720333],
    [20.82141833, -102.77724500],
    [20.82158667, -102.77742333],
    [20.821646, -102.777590],
    [20.82161167, -102.77775167],
    [20.821536, -102.777906],
    [20.821446, -102.777977],
    [20.821353, -102.778026],
    [20.821406, -102.778169],
    [20.821531, -102.778646],
    [20.823075, -102.783582],
    [20.824372, -102.787835],
    [20.826547, -102.787106],
    [20.826933, -102.790255],
    [20.825309, -102.790834],
    [20.825722, -102.792321],
    [20.841980, -102.792598], //Entrada Uni
    [20.841938, -102.792043],
    [20.841803, -102.791459],
    [20.841619, -102.790804],
    [20.841356, -102.789994],
    [20.841160, -102.789251],
    [20.841014, -102.788546],
    [20.840833, -102.787644],
    [20.840812, -102.787451],
    [20.840840, -102.787277],
    [20.840913, -102.787119],
    [20.841087, -102.786991],
    [20.841886, -102.786405],
    [20.842046, -102.786286],
    [20.842160, -102.786195], 
    [20.842315, -102.786054],
    [20.842771, -102.785654],
    [20.843480, -102.784957],
    [20.844693, -102.783510], 
    [20.846050, -102.781955],
    [20.846040, -102.781969],
    [20.846388, -102.781714], 
    [20.846742, -102.781328],
    [20.846832, -102.781303],
    [20.846877, -102.781253],
    [20.846905, -102.781219],
    [20.846971, -102.781194],
    [20.847041, -102.781215],
    [20.847085, -102.781267],
    [20.847097, -102.781298],
    [20.847104, -102.781362],
    [20.847093, -102.781390],
    [20.847073, -102.781427],
    [20.847043, -102.781475],
    [20.847019, -102.781482],
    [20.846990, -102.781477],
    [20.846934, -102.781483],
    [20.846895, -102.781440],
    [20.846860, -102.781407],
    [20.846846, -102.781372],
    [20.846826, -102.781323],
    [20.846760, -102.781340],
    [20.846404, -102.781734],
    [20.846050, -102.781955],
    [20.844711, -102.783527],
    [20.843491, -102.784971],
    [20.842782, -102.785666],
    [20.842177, -102.786213],
    [20.842054, -102.786309],
    [20.840925, -102.787132],
    [20.840827, -102.787427],
    [20.840833, -102.787644],
    [20.841014, -102.788546],
    [20.841160, -102.789251],
    [20.841356, -102.789994],
    [20.841619, -102.790804],
    [20.841803, -102.791459],
    [20.841938, -102.792043],
    [20.842006, -102.792600], 
    [20.842006, -102.79272667],
    [20.84197667, -102.79272667] //Entrada Uni
  ];

  // Inicializar el mapa centrado en la primera coordenada de la ruta
  map = L.map("mi_mapa").setView(rutaC02[0], 18);

  // Capa base de OpenStreetMap
  L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png", {
    attribution: '&copy; OpenStreetMap contributors',
  }).addTo(map);

  // Dibujar la ruta con una polilínea
  polyline = L.polyline(rutaC02, {
    color: "red",
    weight: 5,
    opacity: 0.8,
  }).addTo(map);

  // Ajustar el zoom para mostrar toda la ruta
  map.fitBounds(polyline.getBounds());

  /* Marcadores de inicio y fin
  L.marker(rutaC02[0]).addTo(map).bindPopup("Inicio");
  L.marker(rutaC02[rutaC02.length - 1]).addTo(map).bindPopup("Fin");
  

  const coordenada = [20.82143500, -102.77834333];
  // Crear marcador
  L.marker(coordenada)
    .addTo(map)
    .bindPopup("Marca especial aquí")
    .openPopup();*/
    
});